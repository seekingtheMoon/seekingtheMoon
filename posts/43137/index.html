<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ekkoqaq.cc","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":true,"color":"#FF0000","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="内容摘要：  使用cmd操作 认识和创建数据库表 数据库表列类型 SQL的五大部分 表的完整性约束 数据库对象">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基本操作">
<meta property="og:url" content="https://ekkoqaq.cc/posts/43137/index.html">
<meta property="og:site_name" content="Shallow Dream">
<meta property="og:description" content="内容摘要：  使用cmd操作 认识和创建数据库表 数据库表列类型 SQL的五大部分 表的完整性约束 数据库对象">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-06-27T12:09:14.000Z">
<meta property="article:modified_time" content="2023-02-03T04:19:30.932Z">
<meta property="article:author" content="Ekko">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://ekkoqaq.cc/posts/43137/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MySQL基本操作 | Shallow Dream</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Shallow Dream</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Keep It Simple and Stupid!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ekkoqaq.cc/posts/43137/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Ekko">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shallow Dream">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL基本操作
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-27 20:09:14" itemprop="dateCreated datePublished" datetime="2022-06-27T20:09:14+08:00">2022-06-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-03 12:19:30" itemprop="dateModified" datetime="2023-02-03T12:19:30+08:00">2023-02-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/" itemprop="url" rel="index"><span itemprop="name">MySQL</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>35 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>内容摘要：</p>
<ul>
<li>使用cmd操作</li>
<li>认识和创建数据库表</li>
<li>数据库表列类型</li>
<li>SQL的五大部分</li>
<li>表的完整性约束</li>
<li>数据库对象</li>
</ul>
</blockquote>
<span id="more"></span>
<h2 id="使用cmd操作">使用cmd操作</h2>
<h4 id="登录">登录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -hlocalhost -uroot -p</span><br></pre></td></tr></table></figure>
<p>-h：主机</p>
<p>-u：用户名</p>
<p>-p：密码，这里输入密码是会被看见的，在后续输入</p>
<h4 id="展示数据库目录">展示数据库目录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases</span><br></pre></td></tr></table></figure>
<h4 id="使用某个数据库">使用某个数据库</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use myDB</span><br></pre></td></tr></table></figure>
<h4 id="展示数据库中的所有表">展示数据库中的所有表</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>
<h4 id="退出的三种方式">退出的三种方式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">quit;</span><br><span class="line"><span class="built_in">exit</span>;</span><br><span class="line">\q;</span><br></pre></td></tr></table></figure>
<h4 id="并发模拟">并发模拟</h4>
<p>可以同时使用Navicat和cmd，来实现对数据库的并发操作</p>
<h2 id="数据库表">数据库表</h2>
<h3 id="认识数据库表">认识数据库表</h3>
<p><strong>表 Table</strong></p>
<p>数据库将复杂的数据结构用较为简单的二维表来表示</p>
<p>二维表有<strong>行</strong>和<strong>列</strong></p>
<p>行：记录</p>
<p>列：字段</p>
<h3 id="创建数据库表">创建数据库表</h3>
<h4 id="注释">注释</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## 单行注释</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">多行注释</span><br><span class="line">多行注释</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-- 也是注释</span><br></pre></td></tr></table></figure>
<h4 id="建表语句">建表语句</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table t_student(</span><br><span class="line">        student_no int(6), -- 6显示长度 </span><br><span class="line">        student_name varchar(5), -- 5个字符</span><br><span class="line">        sex char(1),</span><br><span class="line">        age int(3),</span><br><span class="line">        enterdate date,</span><br><span class="line">        classname varchar(10),</span><br><span class="line">        email varchar(15)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>类型很多但是大差不差</p>
<p>int(6) 指显示宽度为6，超过后系统会自动增大宽度</p>
<h4 id="查看表的结构">查看表的结构</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc t_student; ## desc describe</span><br></pre></td></tr></table></figure>
<h4 id="查看建表语句">查看建表语句</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create table t_student;</span><br></pre></td></tr></table></figure>
<h4 id="查看表中的数据">查看表中的数据</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from t_student;</span><br></pre></td></tr></table></figure>
<h2 id="数据库表列类型">数据库表列类型</h2>
<h3 id="整数类型">整数类型</h3>
<p>MySQL支持选择在该关键字后面的括号内指定整数值的<strong>显示宽度</strong></p>
<p><strong>显示宽度并不限制可以在列内保存的值的范围</strong>，也不限制超过列的指定宽度的值的显示</p>
<p>主键自增：不使用序列，通过auto_increment，要求是整数类型</p>
<h3 id="浮点数类型">浮点数类型</h3>
<p>浮点数类型的宽度<strong>不会自动扩充</strong>，与整数类型不一样</p>
<p>score double(4,1)5</p>
<p>说明总宽度为4位，小数部分为1位，并且不会自动扩充</p>
<h3 id="字符串类型">字符串类型</h3>
<p>char和varchar类型相似，均用于存于较短的字符串</p>
<p>区别：</p>
<p>char类型长度固定</p>
<p>varchar类型的长度可变</p>
<p>因为varchar类型能够根据字符串的实际长度来动态改变所占字节的大小，所以在不能明确该字段具体需要多少字符时，推荐使用varchar类型，这样可以大大节约磁盘空间、提高存储效率</p>
<p>char和varchar类型<strong>表示的是字符个数</strong>，而不是字节个数</p>
<h3 id="日期和时间类型">日期和时间类型</h3>
<p>timestamp类型的数据指定方式与datetime基本相同</p>
<p>区别</p>
<ol type="1">
<li>数据的取值范围不同，timestamp取值范围更小</li>
<li>如果对timestamp没有明确赋值，或是被赋予了null值，MySQL会自动将该字段赋值为系统当前的日期与时间</li>
<li>timestamp类型还可以使用current_timestamp来获取系统当前时间</li>
<li>timestamp类型有一个很大特定，时间根据时区来显示</li>
</ol>
<h2 id="sql的五大部分">SQL的五大部分</h2>
<h3 id="dql-数据查询语言">DQL 数据查询语言</h3>
<blockquote>
<p>主要用于数据的查询，基本结构是使用SELECT子句，FROM子句和WHERE子句的组合来查询一条或多条数据</p>
</blockquote>
<p>准备四张表，进行学习</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">create table DEPT(  </span><br><span class="line">  DEPTNO int(2) not null,  </span><br><span class="line">  DNAME  VARCHAR(14),  </span><br><span class="line">  LOC    VARCHAR(13)  </span><br><span class="line">);  </span><br><span class="line">alter table DEPT  </span><br><span class="line">  add constraint PK_DEPT primary key (DEPTNO); </span><br><span class="line">        </span><br><span class="line">create table EMP  </span><br><span class="line">(  </span><br><span class="line">  EMPNO    int(4) primary key,  </span><br><span class="line">  ENAME    VARCHAR(10),  </span><br><span class="line">  JOB      VARCHAR(9),  </span><br><span class="line">  MGR      int(4),  </span><br><span class="line">  HIREDATE DATE,  </span><br><span class="line">  SAL      double(7,2),  </span><br><span class="line">  COMM     double(7,2),  </span><br><span class="line">  DEPTNO   int(2)  </span><br><span class="line">);  </span><br><span class="line">alter table EMP  </span><br><span class="line">  add constraint FK_DEPTNO foreign key (DEPTNO)  </span><br><span class="line">  references DEPT (DEPTNO);  </span><br><span class="line">        </span><br><span class="line">create table SALGRADE  </span><br><span class="line">(  </span><br><span class="line">  GRADE int primary key,  </span><br><span class="line">  LOSAL double(7,2),  </span><br><span class="line">  HISAL double(7,2)  </span><br><span class="line">);  </span><br><span class="line">create table BONUS  </span><br><span class="line">(  </span><br><span class="line">  ENAME VARCHAR(10),  </span><br><span class="line">  JOB   VARCHAR(9),  </span><br><span class="line">  SAL   double(7,2),  </span><br><span class="line">  COMM  double(7,2)  </span><br><span class="line">);  </span><br><span class="line">insert into DEPT (DEPTNO, DNAME, LOC)  </span><br><span class="line">values (10, &#x27;ACCOUNTING&#x27;, &#x27;NEW YORK&#x27;);  </span><br><span class="line">insert into DEPT (DEPTNO, DNAME, LOC)  </span><br><span class="line">values (20, &#x27;RESEARCH&#x27;, &#x27;DALLAS&#x27;);  </span><br><span class="line">insert into DEPT (DEPTNO, DNAME, LOC)  </span><br><span class="line">values (30, &#x27;SALES&#x27;, &#x27;CHICAGO&#x27;);  </span><br><span class="line">insert into DEPT (DEPTNO, DNAME, LOC)  </span><br><span class="line">values (40, &#x27;OPERATIONS&#x27;, &#x27;BOSTON&#x27;);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7369, &#x27;SMITH&#x27;, &#x27;CLERK&#x27;, 7902, &#x27;1980-12-17&#x27;, 800, null, 20);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7499, &#x27;ALLEN&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1981-02-20&#x27;, 1600, 300, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7521, &#x27;WARD&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1981-02-22&#x27;, 1250, 500, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7566, &#x27;JONES&#x27;, &#x27;MANAGER&#x27;, 7839, &#x27;1981-04-02&#x27;, 2975, null, 20);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7654, &#x27;MARTIN&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1981-09-28&#x27;, 1250, 1400, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7698, &#x27;BLAKE&#x27;, &#x27;MANAGER&#x27;, 7839, &#x27;1981-05-01&#x27;, 2850, null, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7782, &#x27;CLARK&#x27;, &#x27;MANAGER&#x27;, 7839, &#x27;1981-06-09&#x27;, 2450, null, 10);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7788, &#x27;SCOTT&#x27;, &#x27;ANALYST&#x27;, 7566, &#x27;1987-04-19&#x27;, 3000, null, 20);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7839, &#x27;KING&#x27;, &#x27;PRESIDENT&#x27;, null, &#x27;1981-11-17&#x27;, 5000, null, 10);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7844, &#x27;TURNER&#x27;, &#x27;SALESMAN&#x27;, 7698, &#x27;1981-09-08&#x27;, 1500, 0, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7876, &#x27;ADAMS&#x27;, &#x27;CLERK&#x27;, 7788, &#x27;1987-05-23&#x27;, 1100, null, 20);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7900, &#x27;JAMES&#x27;, &#x27;CLERK&#x27;, 7698, &#x27;1981-12-03&#x27;, 950, null, 30);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7902, &#x27;FORD&#x27;, &#x27;ANALYST&#x27;, 7566, &#x27;1981-12-03&#x27;, 3000, null, 20);  </span><br><span class="line">insert into EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO)  </span><br><span class="line">values (7934, &#x27;MILLER&#x27;, &#x27;CLERK&#x27;, 7782, &#x27;1982-01-23&#x27;, 1300, null, 10);  </span><br><span class="line">insert into SALGRADE (GRADE, LOSAL, HISAL)  </span><br><span class="line">values (1, 700, 1200);  </span><br><span class="line">insert into SALGRADE (GRADE, LOSAL, HISAL)  </span><br><span class="line">values (2, 1201, 1400);  </span><br><span class="line">insert into SALGRADE (GRADE, LOSAL, HISAL)  </span><br><span class="line">values (3, 1401, 2000);  </span><br><span class="line">insert into SALGRADE (GRADE, LOSAL, HISAL)  </span><br><span class="line">values (4, 2001, 3000);  </span><br><span class="line">insert into SALGRADE (GRADE, LOSAL, HISAL)  </span><br><span class="line">values (5, 3001, 9999);</span><br><span class="line"></span><br><span class="line">select * from dept;</span><br><span class="line"></span><br><span class="line">select * from emp;</span><br><span class="line"></span><br><span class="line">select * from salgrade;</span><br><span class="line"></span><br><span class="line">select * from bonus;</span><br></pre></td></tr></table></figure>
<p>四张表</p>
<ul>
<li>部门表（dept）</li>
<li>员工表（emp）</li>
<li>薪资等级表（salgrade）</li>
<li>奖金表（bonus）</li>
</ul>
<p>DQL依靠上面的四张表介绍</p>
<h4 id="单表查询">单表查询</h4>
<blockquote>
<p>内容摘要：</p>
<ol type="1">
<li><p>select语句：</p>
<p>select column，group_function(column)</p>
<p>from table</p>
<p>[where condition]</p>
<p>[group by group_by_expression]</p>
<p>[having group_condition]</p>
<p>[order by column]</p>
<p>顺序固定，不要改变</p></li>
<li><p>select语句的执行顺序</p>
<p>from--where-- group by-- select -- having -- order by</p>
<p>从哪个表查，where过滤信息，按需分组，在筛选目标列，having二次过滤，排序</p></li>
</ol>
</blockquote>
<h5 id="基础查询">基础查询</h5>
<h6 id="显示所有数据">显示所有数据</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp;</span><br></pre></td></tr></table></figure>
<p>* 代表所有数据</p>
<hr>
<h6 id="显示部分列">显示部分列</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select empno,ename,sal from emp;</span><br></pre></td></tr></table></figure>
<p>显示需要的列</p>
<hr>
<h6 id="显示部分行where子句">显示部分行：where子句</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal &gt; 2000;</span><br></pre></td></tr></table></figure>
<p>相当于加设条件句，筛除不合要求的行</p>
<hr>
<h6 id="显示部分列部分行">显示部分列，部分行</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select empno,ename,job,mgr from emp where sal &gt; 1000;</span><br></pre></td></tr></table></figure>
<p>混合使用即可</p>
<hr>
<h5 id="一些操作">一些操作</h5>
<h6 id="起别名">起别名</h6>
<p>对于字段的英文名字，起中文名字方便看</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select empno 员工编号,ename 姓名,sal 工资 from emp;</span><br><span class="line">select empno as 员工编号,ename as 姓名,sal as 工资 from emp;</span><br><span class="line">select empno as &#x27;员工编号&#x27;,ename as &quot;姓名&quot;,sal as 工资 from emp;</span><br><span class="line">select empno as &#x27;员 工编号&#x27;,ename as &quot; 姓名&quot;,sal as 工资 from emp;</span><br></pre></td></tr></table></figure>
<p>as 可以省略，是<strong>alias 别名</strong>的缩写</p>
<p>别名中的引号可以省略，对结果没有影响</p>
<p><strong>但是，如果需要在别名里添加特殊字符，则引号不可省略</strong></p>
<hr>
<h6 id="算数运算符">算数运算符</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select empno,ename,sal,sal+1000 涨薪,deptno from emp where sal &lt; 2500;</span><br><span class="line">select empno,ename,sal,comm,sal+comm from emp;</span><br></pre></td></tr></table></figure>
<p>原数据不会改变</p>
<p>如果相加的两数中一个为null，那么结果也为空</p>
<hr>
<h6 id="去重操作">去重操作</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select distinct job from emp;</span><br><span class="line">select distinct job,deptno from emp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>多列去重是对他们的组合进行去重</p>
<hr>
<h6 id="排序">排序</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from emp order by sal;</span><br><span class="line">select * from emp order by sal asc;</span><br><span class="line">select * from emp order by sal desc;</span><br><span class="line">select * from emp order by sal asc, deptno desc;</span><br></pre></td></tr></table></figure>
<p>默认情况下按照升序排列</p>
<p>asc 升序</p>
<p>desc 降序</p>
<p>不同列的排序方式可以单独设置</p>
<hr>
<h5 id="where子句">where子句</h5>
<h6 id="where-子句-关系运算符">where 子句 + 关系运算符</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno = 10;</span><br><span class="line">select * from emp where deptno &lt; 10;</span><br><span class="line">select * from emp where deptno &gt; 10;</span><br><span class="line">select * from emp where deptno &lt;= 10;</span><br><span class="line">select * from emp where deptno &gt;= 10;</span><br><span class="line">select * from emp where deptno &lt;&gt; 10;</span><br><span class="line">select * from emp where deptno != 10;</span><br></pre></td></tr></table></figure>
<p>where子句：将过滤条件放在where子句的后面，可以筛选/过滤出我们想要的符合条件的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where job = &#x27;CLERK&#x27;;</span><br><span class="line">select * from emp where job = &#x27;clerk&#x27;;</span><br><span class="line">select * from emp where binary job = &#x27;CLERK&#x27;;</span><br><span class="line">select * from emp where hiredate &lt; &#x27;1981-12-25&#x27;;</span><br></pre></td></tr></table></figure>
<p>关系运算符不止可以用于数字，对于字符，日期有同样效果</p>
<p>默认情况下不区分大小写</p>
<p>添加 <strong>binary</strong> 关键字区分大小写</p>
<hr>
<h6 id="and-和-两种表示">and 和 &amp;&amp; 两种表示</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal &gt; 1500 and sal &lt; 3000;</span><br><span class="line">select * from emp where sal &gt; 1500 &amp;&amp; sal &lt; 3000;</span><br></pre></td></tr></table></figure>
<hr>
<h6 id="筛选完后排序语句加在后面即可">筛选完后，排序，语句加在后面即可</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal &gt; 1500 and sal &lt; 3000 order by sal;</span><br></pre></td></tr></table></figure>
<hr>
<h6 id="between-范围关键字"><strong>between</strong> 范围关键字</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal between 1500 and 3000;</span><br></pre></td></tr></table></figure>
<p><strong>between A and B = [A,B]</strong></p>
<hr>
<h6 id="or-和-两种表示">or 和 || 两种表示</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno = 10 or deptno = 20;</span><br><span class="line">select * from emp where deptno = 10 || deptno = 20;</span><br></pre></td></tr></table></figure>
<hr>
<h6 id="另一种集合表示">另一种集合表示</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno in (10,20);</span><br><span class="line">select * from emp where job in (&#x27;MANAGER&#x27;,&#x27;CLERK&#x27;,&#x27;ANALYST&#x27;);</span><br></pre></td></tr></table></figure>
<hr>
<h5 id="模糊查询">模糊查询</h5>
<p>例如查询名字中带A的员工</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where ename like &#x27;%A%&#x27;;</span><br></pre></td></tr></table></figure>
<p>模糊查询，使用 like</p>
<p>% 代表任意多的字符 0，1，2，...</p>
<p>查询名字中第二个字母为A的员工</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where ename like &#x27;_A%&#x27;;</span><br></pre></td></tr></table></figure>
<p>_ 代表一个字符</p>
<h5 id="关于-null-的判断">关于 null 的判断</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where comm is null;</span><br><span class="line">select * from emp where comm is not null;</span><br></pre></td></tr></table></figure>
<p>不能用 =</p>
<p>is null 是空</p>
<p>is not null 不是空</p>
<h5 id="小括号的使用">小括号的使用</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where job = &#x27;SALESMAN&#x27; or job = &#x27;CLERK&#x27; and sal &gt;=1500;</span><br><span class="line">select * from emp where job = &#x27;SALESMAN&#x27; or (job = &#x27;CLERK&#x27; and sal &gt;=1500); </span><br><span class="line">select * from emp where (job = &#x27;SALESMAN&#x27; or job = &#x27;CLERK&#x27;) and sal &gt;=1500;</span><br></pre></td></tr></table></figure>
<p>改变优先级</p>
<h5 id="函数">函数</h5>
<p>通过封装一些特定功能，需要时直接使用，实现对应功能</p>
<p>作用：提高select的能力</p>
<p>函数并不会改变数据，只是对真实数据进行加工，展示新的结果</p>
<hr>
<h6 id="单行函数">单行函数</h6>
<p>对每一条记录进行计算，得到结果并返回</p>
<p><strong>改变每一条数据，每一条数据对应一条结果</strong></p>
<p>常用的单行函数主要包括字符串函数，数值函数，日期与时间函数，流程函数以及其他函数</p>
<ol type="1">
<li><p><strong>字符串函数</strong></p>
<ul>
<li><p>length()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ename,length(ename) from emp;</span><br></pre></td></tr></table></figure>
<p>获取字符串长度</p></li>
<li><p>substring()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ename,substring(ename,2,3) from emp;</span><br></pre></td></tr></table></figure>
<p>截取子串</p>
<p>三个参数依次：处理对象，开始位置，截取长度（ename，从第二个字符开始，截取长度为3的子串）<strong>（下标从1开始）</strong></p>
<p>如果指定截取长度超过处理对象长度，就截取到对象末尾</p></li>
</ul></li>
<li><p><strong>数值函数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select abs(-5) 绝对值,ceil(5.3) 向上取整,floor(5.9) 向下取整,round(3.74) 四舍五入,10/3 &#x27;10除以3&#x27;, 10%3 &#x27;10%3&#x27;,mod(10,3) &#x27;mod(10,3)&#x27; from dual;</span><br></pre></td></tr></table></figure>
<p>from dual 取处理对象为 dual，是默认的伪表，这样不会打印特别多行</p>
<p>abs()：绝对值</p>
<p>ceil()：向上取整</p>
<p>floor()：向下取整</p>
<p>round()：四舍五入</p>
<p>/：除法</p>
<p>mod()或%：取模</p>
<p>当然改名字也是同样可以的</p></li>
<li><p><strong>日期与时间函数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select curdate(),curtime() from dual;</span><br></pre></td></tr></table></figure>
<p>curdate()：年月日</p>
<p>curtime()：时分秒</p>
<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select now(),sysdate(),sleep(3),now(),sysdate() from dual;</span><br></pre></td></tr></table></figure>
<p>同时表示<strong>年月日时分秒</strong></p>
<p>now()：当前时间</p>
<p>sysdate()：函数执行时的时间</p>
<p>虽然这两个可以表示年月日时分秒，但是插入数据时还是参照表的结构</p></li>
<li><p><strong>流程函数</strong></p>
<p><strong>if 相关</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select empno,ename,sal,if(sal &gt;= 2500,&#x27;高薪&#x27;,&#x27;底薪&#x27;) &#x27;薪资等级&#x27; from emp;</span><br><span class="line">select empno,ename,sal,comm,sal+ifnull(comm,0) &#x27;工资&#x27; from emp;</span><br><span class="line">select nullif(1,1),nullif(1,2) from dual;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>if(条件，满足执行，不满足执行)，很类似于三位运算符<strong>X ？A
：B</strong></p></li>
<li><p>ifnull(对象，满足执行)，不为空就执行原数据</p></li>
<li><p>nullif(A，B)</p>
<p>A = B ：null</p>
<p>A != B ：返回第一个值</p></li>
</ul>
<p><strong>case 相关</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">select empno,ename,job,</span><br><span class="line">case job</span><br><span class="line">	when &#x27;CLERK&#x27; then &#x27;店员&#x27;</span><br><span class="line">	when &#x27;SALESMAN&#x27; then &#x27;销售&#x27;</span><br><span class="line">	when &#x27;MANAGER&#x27; then &#x27;经理&#x27;</span><br><span class="line">	else &#x27;其他&#x27;</span><br><span class="line">end 岗位,</span><br><span class="line">sal</span><br><span class="line">from emp;</span><br><span class="line"></span><br><span class="line">select empno,ename,sal,</span><br><span class="line">case</span><br><span class="line">	when sal&lt;=1000 then &#x27;A&#x27;</span><br><span class="line">	when sal&lt;=2000 then &#x27;B&#x27;</span><br><span class="line">	when sal&lt;=3000 then &#x27;C&#x27;</span><br><span class="line">	else &#x27;D&#x27;</span><br><span class="line">end 薪资等级,</span><br><span class="line">deptno</span><br><span class="line">from emp;</span><br></pre></td></tr></table></figure>
<p>太像VHDL了，格式记住，就相当于把if换成了when</p>
<p>同样，可以改名字，可以加别的操作</p></li>
<li><p><strong>JSON函数</strong></p>
<p><del>json不会，所以先欠着</del></p></li>
<li><p><strong>其他函数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select database(),user(),version() from dual;</span><br></pre></td></tr></table></figure>
<p>database()：当前数据库名</p>
<p>user()：当前登录的用户名</p>
<p>version()：当前MySQL版本号</p></li>
</ol>
<hr>
<h6 id="多行函数分组函数">多行函数（分组函数）</h6>
<p>对一组数据进行计算，返回一个结果</p>
<p><strong>多条数据展示一个结果</strong></p>
<p>除了多行函数（max，min，count，sum，avg），都是单行函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select max(sal),min(sal),count(sal),sum(sal),avg(sal) from emp;</span><br></pre></td></tr></table></figure>
<p>max()：最大</p>
<p>min()：最小</p>
<p>count()：计数</p>
<p>sum()：求和</p>
<p>avg()：求平均值</p>
<p>自动忽略null值</p>
<p>sum，avg对字符一类没有意义</p>
<h5 id="分组">分组</h5>
<h6 id="group-by">group by</h6>
<p>如果我想要查员工的平均工资可以使用avg（sal）实现，但是实际情况下，我们更倾向于分部门，看员工的平均工资</p>
<p>可以先进行分组，在计算平均工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select deptno,avg(sal) from emp group by deptno;</span><br><span class="line">select deptno,avg(sal) from emp group by deptno order by deptno desc;</span><br></pre></td></tr></table></figure>
<p>字段和多行函数不可同时使用，除非这个字段属于分组</p>
<p>同样，分组后也可以进行改名，排序，改变大小写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select job,avg(sal) from emp group by job;</span><br><span class="line">select job,lower(job) 职位,avg(sal) 平均工资 from emp group by job;</span><br></pre></td></tr></table></figure>
<h6 id="分组后筛选-having">分组后筛选 having</h6>
<p>在计算完平均工资后，想要看看平均工资高于2000的部门</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select deptno,avg(sal) from emp group by deptno having avg(sal) &gt; 2000;</span><br><span class="line">select deptno,avg(sal) 平均工资 from emp group by deptno having 平均工资 &gt; 2000;</span><br><span class="line">select deptno,avg(sal) 平均工资 from emp group by deptno having 平均工资 &gt; 2000 order by 平均工资 desc;</span><br></pre></td></tr></table></figure>
<p>having 加上条件即可</p>
<p>同样可以进行改名，改名也可用于约束条件</p>
<p>也可以排序</p>
<hr>
<p>所以我们就有两种办法筛除掉管理层的平均工资</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select job,avg(sal) 平均工资 from emp where job != &#x27;MANAGER&#x27; group by job;</span><br><span class="line">select job,avg(sal) 平均工资 from emp group by job having job != &#x27;MANAGER&#x27;;</span><br></pre></td></tr></table></figure>
<p>一种使用where，先筛去管理层，再分组计算平均工资</p>
<p>一种使用having，先计算平均工资，再筛去管理层</p>
<p>所以</p>
<p>where 在分组前过滤，having 在分组后过滤</p>
<h4 id="多表查询">多表查询</h4>
<p>在多张数据库表中查询数据，使用连接查询来查询多张表中满足要求的数据记录。</p>
<p><strong>join</strong>关键字</p>
<p>提供的连接查询类型：cross、natural、using、on</p>
<h5 id="语法">语法</h5>
<h6 id="交叉连接">交叉连接</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">cross join dept;</span><br></pre></td></tr></table></figure>
<p>MySQL可以省略cross</p>
<p>cross join 交叉连接：会出现笛卡尔乘积，没有实际意义，有理论意义</p>
<hr>
<h6 id="自然连接">自然连接</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">natural join dept;</span><br></pre></td></tr></table></figure>
<p>natural join
自然连接：自动匹配所有的同名列，同名列只展示一次，简单</p>
<p>缺点：查询字段的时候，没有指定字段所属的数据库表，效率低</p>
<p>解决：指定表名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select emp.empno,emp.ename,emp.sal,dept.dname,dept.loc</span><br><span class="line">from emp</span><br><span class="line">natural join dept;</span><br></pre></td></tr></table></figure>
<p>缺点：表名过长有麻烦</p>
<p>解决：改名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e.empno,e.ename,e.sal,d.dname,d.loc</span><br><span class="line">from emp e</span><br><span class="line">natural join dept d;</span><br></pre></td></tr></table></figure>
<p>缺点：因为自然连接会自动匹配表中所有的同名列，但是有时候我们希望只匹配部分同名列</p>
<p>解决：内连接——using子句</p>
<hr>
<h6 id="using-子句">using 子句</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">inner join dept d</span><br><span class="line">using(deptno);</span><br></pre></td></tr></table></figure>
<p>inner 可以不写</p>
<p>属于内连接，不能写natural join</p>
<p>缺点：using 关联的字段，必须是同名字段</p>
<p>解决：内连接——on子句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">inner join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br></pre></td></tr></table></figure>
<p>多表连接查询</p>
<ul>
<li>cross join 交叉连接</li>
<li>natural join 自然连接</li>
<li>内连接——using子句</li>
<li>内连接——on子句（最常用）</li>
</ul>
<p>条件：</p>
<ol type="1">
<li>筛选条件 where having</li>
<li>连接条件 on using natural</li>
</ol>
<p>SQL99语法：筛选条件和连接条件是分开的</p>
<hr>
<p>内连接会导致冲突信息丢失，出现在查询结果中不显示的问题</p>
<p><strong>外连接</strong>：除了显示匹配的数据之外，还可以显示不匹配的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">left outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br></pre></td></tr></table></figure>
<p>left outer join
左外连接：左面的表的信息，即使不匹配也可以查看出效果</p>
<p>同理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">right outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br></pre></td></tr></table></figure>
<p>right outer join
右外连接：右面的表的信息，即使不匹配也可以查看出效果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> emp e</span><br><span class="line"><span class="keyword">full</span> <span class="keyword">outer</span> <span class="keyword">join</span> dept d</span><br><span class="line"><span class="keyword">on</span> (e.deptno <span class="operator">=</span> d.deptno);</span><br></pre></td></tr></table></figure>
<p><strong>MySQL不支持full outer join（全外连接）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">left outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br><span class="line">union</span><br><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">right outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br></pre></td></tr></table></figure>
<p>将左外和右外取并集</p>
<p>union 并集 去重 效率低</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">left outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br><span class="line">union all</span><br><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">right outer join dept d</span><br><span class="line">on (e.deptno = d.deptno);</span><br></pre></td></tr></table></figure>
<p>union all 并集 不去重 效率高</p>
<p><strong>outer 可以省略</strong></p>
<p><strong>MySQL对集合操作支持较弱，只支持并集，不支持交集，差集</strong></p>
<hr>
<h6 id="三表连接查询">三表连接查询</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select e.ename,e.sal,e.empno,e.deptno,d.dname,s.*</span><br><span class="line">from emp e</span><br><span class="line">right outer join dept d</span><br><span class="line">on e.deptno = d.deptno</span><br><span class="line">inner join salgrade s</span><br><span class="line">on e.sal between s.losal and s.hisal</span><br></pre></td></tr></table></figure>
<p>多表连接的要点</p>
<p>相当于两张表连接后成为一张表，然后再连接另一张表</p>
<p>从而实现多张表的连接</p>
<p>外连接和内连接灵活使用实现不同功能</p>
<h6 id="自连接查询">自连接查询</h6>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select e1.empno 员工编号,e1.ename 员工姓名,e1.mgr 领导编号,e2.ename 领导姓名 </span><br><span class="line">from emp e1</span><br><span class="line">left outer join emp e2</span><br><span class="line">on e1.mgr = e2.empno;</span><br></pre></td></tr></table></figure>
<p>一张表和自己连接查询</p>
<p>把一张表想象成两张表</p>
<h6 id="语法的多表查询">92语法的多表查询</h6>
<p><strong>92-cross join</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select e.empno,e.ename,e.sal,e.deptno,d.dname</span><br><span class="line">from emp e,dept d</span><br></pre></td></tr></table></figure>
<p><strong>92-natural join</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e.empno,e.ename,e.sal,e.deptno,d.dname</span><br><span class="line">from emp e,dept d</span><br><span class="line">where e.deptno = d.deptno;</span><br></pre></td></tr></table></figure>
<p><strong>筛选</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e.empno,e.ename,e.sal,e.deptno,d.dname</span><br><span class="line">from emp e,dept d</span><br><span class="line">where e.deptno = d.deptno and e.sal &gt; 2000;</span><br></pre></td></tr></table></figure>
<p><strong>自连接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e1.ename,e1.job,e1.mgr,e2.ename</span><br><span class="line">from emp e1,emp e2</span><br><span class="line">where e1.mgr = e2.empno</span><br></pre></td></tr></table></figure>
<p><strong>多表连接</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select e.empno,e.ename,e.sal,e.deptno,d.dname,s.grade</span><br><span class="line">from emp e,dept d,salgrade s</span><br><span class="line">where e.deptno = d.deptno and e.sal between s.losal and s.hisal;</span><br></pre></td></tr></table></figure>
<p>缺点：</p>
<ol type="1">
<li>92 语法麻烦</li>
<li>表的连接条件和筛选条件放在一起没有分开</li>
<li>99语法中提供了更多的查询连接类型：cross，natural，inner，outer</li>
</ol>
<h4 id="子查询">子查询</h4>
<p>有时查询操作一次不能完成，分步骤虽然能解决问题，但是效率低，第二个命令依托于第一个命令，第一个命令的结果给第二个命令使用，但是第一个命令结果改变后，第二个命令也会导致修改</p>
<p>所以将步骤合并——<strong>子查询</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal &gt; (select sal from emp where ename = &#x27;CLARK&#x27;);</span><br></pre></td></tr></table></figure>
<p>一个命令解决问题，效率高</p>
<h5 id="不相关子查询">不相关子查询</h5>
<p><strong>可以独立运行的子查询</strong>，称为不相关子查询</p>
<p>执行顺序：<strong>先执行子查询，再执行外查询</strong></p>
<p>优点：功能强大，简单</p>
<p>缺点：较难理解</p>
<p>根据子查询的结果行数，可以分为单行子查询和多行子查询</p>
<h6 id="单行子查询">单行子查询</h6>
<p>几个单行子查询练习</p>
<ol type="1">
<li>查询工资高于平均工资的雇员名字和工资</li>
<li>查询和CLARK同一部门且比他工资低的雇员名字和工资</li>
<li>查询职务和SCOTT相同，比SCOTT雇佣时间早的雇员信息</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">select ename,sal</span><br><span class="line">from emp</span><br><span class="line">where sal &gt; (select avg(sal) from emp);</span><br><span class="line"></span><br><span class="line">select ename,sal</span><br><span class="line">from emp</span><br><span class="line">where deptno = (select deptno from emp where ename = &#x27;CLARK&#x27;)</span><br><span class="line">	and sal &lt; (select sal from emp where ename = &#x27;CLARK&#x27;);</span><br><span class="line"></span><br><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">where job = (select job from emp where ename = &#x27;SCOTT&#x27;)</span><br><span class="line">	and hiredate &lt; (select hiredate from emp where ename = &#x27;SCOTT&#x27;);</span><br></pre></td></tr></table></figure>
<h6 id="多行子查询">多行子查询</h6>
<p>几个多行子查询练习</p>
<ol type="1">
<li>查询部门20中职务同部门10的雇员一样的雇员信息</li>
<li>查询工资比所有的“SALESMAN”都高的雇员的编号、名字和工资</li>
<li>查询工资低于任意一个“CLERK”的工资的雇员信息</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">-- 1</span><br><span class="line">select * from emp</span><br><span class="line">where deptno = 20</span><br><span class="line">and job in (select job from emp where deptno = 10);</span><br><span class="line"></span><br><span class="line">select * from emp</span><br><span class="line">where deptno = 20</span><br><span class="line">and job = any(select job from emp where deptno = 10);</span><br><span class="line"></span><br><span class="line">-- 2</span><br><span class="line">-- 多行子查询</span><br><span class="line">select empno,ename,sal</span><br><span class="line">from emp</span><br><span class="line">where sal &gt; all(select sal from emp where job = &#x27;SALESMAN&#x27;);</span><br><span class="line">-- 单行也能实现</span><br><span class="line">select empno,ename,sal</span><br><span class="line">from emp</span><br><span class="line">where sal &gt; (select max(sal) from emp where job = &#x27;SALESMAN&#x27;);</span><br><span class="line"></span><br><span class="line">-- 3</span><br><span class="line">-- 多行子查询</span><br><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">where sal &lt; all(select sal from emp where job = &#x27;CLERK&#x27;)</span><br><span class="line">	and job != &#x27;CLERK&#x27;;</span><br><span class="line">-- 单行也能实现</span><br><span class="line">select * </span><br><span class="line">from emp</span><br><span class="line">where sal &lt; (select min(sal) from emp where job = &#x27;CLERK&#x27;)</span><br><span class="line">	and job != &#x27;CLERK&#x27;;</span><br></pre></td></tr></table></figure>
<p>多行的几个</p>
<p>any()：逻辑中满足子查询其中之一</p>
<p>all()：逻辑中满足所有子查询</p>
<h5 id="相关子查询">相关子查询</h5>
<p><strong>子查询不可以独立运行</strong>，称为相关子查询</p>
<p>执行顺序：<strong>先运行外查询，再运行子查询</strong></p>
<ol type="1">
<li>查询本部门最高工资的员工</li>
</ol>
<p>通过不相关子查询实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno = 10 and sal = (select max(sal) from emp where deptno = 10)</span><br><span class="line">union</span><br><span class="line">select * from emp where deptno = 20 and sal = (select max(sal) from emp where deptno = 20)</span><br><span class="line">union</span><br><span class="line">select * from emp where deptno = 30 and sal = (select max(sal) from emp where deptno = 30)</span><br><span class="line">union</span><br><span class="line">select * from emp where deptno = 40 and sal = (select max(sal) from emp where deptno = 40)</span><br></pre></td></tr></table></figure>
<p>缺点：语句太多，具体几个部门不好枚举</p>
<p>通过相关子查询实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp e where sal = (select max(sal) from emp where deptno = e.deptno) order by deptno</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>查询工资高于其所在岗位的平均工资的那些员工</li>
</ol>
<p>相关子查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp e where sal &gt;= (select avg(sal) from emp e2 where e2.job = e.job)</span><br></pre></td></tr></table></figure>
<h3 id="dml-数据操作语言">DML 数据操作语言</h3>
<blockquote>
<p>对数据库中数据进行<strong>增、删、改</strong>的操作</p>
<ul>
<li>INSERT：增加数据</li>
<li>UPDATE：修改数据</li>
<li>DELETE：删除数据</li>
</ul>
</blockquote>
<h4 id="添加数据">添加数据</h4>
<p>两种方式：</p>
<p>根据设定的格式依次填写信息，全字段插入数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into t_student values(1,&#x27;张三&#x27;,&#x27;男&#x27;,18,&#x27;2022-5-8&#x27;,&#x27;软件1班&#x27;,&#x27;123@126.com&#x27;);</span><br></pre></td></tr></table></figure>
<p>有些信息暂时不知道，只插入特定字段的数据，就需要加入字段的名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into t_student (student_no,student_name,enterdate) values (10,&#x27;李四&#x27;,&#x27;2023-7-5&#x27;)</span><br></pre></td></tr></table></figure>
<p>添加多条数据时可以合并添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">insert into t_class values (null,&#x27;java001&#x27;,&#x27;r803&#x27;); -- 1</span><br><span class="line">insert into t_class values (null,&#x27;java002&#x27;,&#x27;r416&#x27;);</span><br><span class="line">insert into t_class values (null,&#x27;大数据001&#x27;,&#x27;r103&#x27;);</span><br><span class="line"></span><br><span class="line">insert into t_class values (null,&#x27;java001&#x27;,&#x27;r803&#x27;),(null,&#x27;java002&#x27;,&#x27;r416&#x27;),(null,&#x27;大数据001&#x27;,&#x27;r103&#x27;); -- 2</span><br></pre></td></tr></table></figure>
<p>上述两种办法效果一致</p>
<h5 id="注意事项">注意事项：</h5>
<h6 id="时间">时间</h6>
<p>类型中时间有很多的表示方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">“2023/1/11”	## 1</span><br><span class="line">“2023-1-11” ## 2</span><br><span class="line">“2023.1.11” ## 3</span><br></pre></td></tr></table></figure>
<p>如果想要调用当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">now()</span><br><span class="line">sysdate()</span><br><span class="line">CURRENT_DATE()</span><br></pre></td></tr></table></figure>
<h6 id="char-varchar">char varchar</h6>
<p>是字符的个数，不是字节的个数，</p>
<p>如果需要控制字节个数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">binary		## 定长</span><br><span class="line">varbinary	## 不定长</span><br></pre></td></tr></table></figure>
<h4 id="修改删除数据">修改、删除数据</h4>
<p>修改表中数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">update t_student set sex = &#x27;女&#x27;;</span><br><span class="line">update t_student set sex = &#x27;男&#x27; where student_no = 10;</span><br><span class="line">UPDATE T_STUDENT SET AGE = 21 WHERE STUDENT_NO = 10;</span><br><span class="line">update t_student set CLASSNAME = &#x27;java01&#x27; where student_no = 10 ;</span><br><span class="line">update t_student set CLASSNAME = &#x27;JAVA01&#x27; where student_no = 9 ;</span><br><span class="line">update t_student set age = 29 where classname = &#x27;java01&#x27;;</span><br></pre></td></tr></table></figure>
<p>删除操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from t_student where student_no = 2;</span><br></pre></td></tr></table></figure>
<p>修改（更新）：update</p>
<p>删除：delete</p>
<h5 id="注意事项-1">注意事项：</h5>
<p>关键字，表名，字段名不区分大小写</p>
<p>默认情况下，内容不区分大小写</p>
<p>删除操作from关键字不可缺少</p>
<p>修改，删除数据别忘记加限制条件</p>
<h4 id="清空表内数据">清空表内数据</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from t_student;</span><br><span class="line">truncate table t_student;</span><br></pre></td></tr></table></figure>
<p>结果上都是清空数据库表中数据</p>
<p>truncate 截断</p>
<h5 id="delete和truncate的区别">delete和truncate的区别</h5>
<ol type="1">
<li>delete 属于DML；truncate属于DDL</li>
<li>delete操作是将表中所有记录逐条删完；truncate操作是保留结构，就像字面意思的截断，相当于将原表部分与新表部分截断，重新编号记录，truncate操作效率更高</li>
<li>delete操作可以回滚；truncate操作会导致隐式提交，因此不能回滚</li>
<li>delete操作成功后会返回已删除的行数（删除4行记录，“Affected
rows：4”；截断操作不会返回已删除的行数，通常是“Affected rows：0”）</li>
<li>delete操作删除表中记录后，再次向表中添加新记录时，对于设置有自增约束字段的值会从删除前表中该字段的最大值加1开始自增；truncate操作则会重新从1开始自增</li>
</ol>
<h3 id="ddl-数据定义语言">DDL 数据定义语言</h3>
<blockquote>
<p>对数据库对象的创建，修改，删除操作</p>
<ul>
<li>CREATE：创建数据库对象</li>
<li>ALTER：修改数据库对象</li>
<li>DROP：删除数据库对象</li>
</ul>
</blockquote>
<h4 id="创建数据库表-1">创建数据库表</h4>
<h4 id="修改删除数据库表">修改删除数据库表</h4>
<h5 id="修改表的结构">修改表的结构</h5>
<p>增加一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student add score double(5,2);</span><br><span class="line">alter table t_student add score double(5,2) first;		## 加到表最前面</span><br><span class="line">alter table t_student add score double(5,2) after sex;	## 放到sex列后面</span><br></pre></td></tr></table></figure>
<p>增加成绩一列，数据类型为double，总长度为5，小数点后保留2位</p>
<p>删除一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student drop score;</span><br></pre></td></tr></table></figure>
<p>修改一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student modify score float(4,1);</span><br><span class="line">alter table t_student change score scorel double(5,1);</span><br></pre></td></tr></table></figure>
<p>modify：修改列的类型定义，不会修改列的名字</p>
<p>change：修改列的名字和列的类型定义</p>
<p>删除表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table t_student;</span><br></pre></td></tr></table></figure>
<h4 id="快速添加数据库表">快速添加数据库表</h4>
<h5 id="结构和数据跟原表一致">结构和数据跟原表一致</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table t_student2</span><br><span class="line">as</span><br><span class="line">select * from t_student;</span><br></pre></td></tr></table></figure>
<p>简简单单复制一张数据库表</p>
<h5 id="只保留原表结构不包括数据">只保留原表结构，不包括数据</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table t_student3</span><br><span class="line">as</span><br><span class="line">select * from t_student where 0=1;</span><br></pre></td></tr></table></figure>
<p>where 0=1，任何时候都不成立，所以，所有元素都不会被复制</p>
<p>复制一张具有结构的空表</p>
<h5 id="只复制部分列部分数据">只复制部分列，部分数据</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create table t_student4</span><br><span class="line">as</span><br><span class="line">select sno,sname,age from t_student where sno = 2;</span><br></pre></td></tr></table></figure>
<p>复制sno，sname，age列，其中sno=2的信息</p>
<p>已经不只是复制的能力了，属于筛选信息了</p>
<h3 id="dcl-数据控制语言">DCL 数据控制语言</h3>
<blockquote>
<p>用来授予或回收访问数据库的权限</p>
<ul>
<li>GRANT：授予用户某种权限</li>
<li>REVOKE：回收授予的某种权限</li>
</ul>
</blockquote>
<h3 id="tcl-事务控制语言">TCL 事务控制语言</h3>
<blockquote>
<p>用于数据库的事物管理</p>
<ul>
<li>START TRANSACTION：开启事务</li>
<li>COMMIT：提交事务</li>
<li>ROLLBACK：回滚事务</li>
<li>SET TRANSACTION：设置事务的属性</li>
</ul>
</blockquote>
<h2 id="表的完整性约束">表的完整性约束</h2>
<p>为了<strong>防止不符合规范的数据存入数据库</strong>，MySQL提供了一种机制，检查增、删、改过程中的数据是否符号规范，来<strong>保证数据库中数据的准确性和一致性</strong>，这种机制就是<strong>完整性约束</strong></p>
<p><strong>非外键约束</strong></p>
<ul>
<li>PRIMARY KEY：主键约束，约束字段的值可唯一地标识对应的记录</li>
<li>NOT NULL：非空约束，约束字段的值不能为空</li>
<li>UNIQUE：唯一约束，约束字段的值是唯一的</li>
<li>CHECK：检查约束，限制某个字段的取值范围</li>
<li>DEFAULT：默认值约束，约束字段的默认值</li>
<li>AUTO_INCREMENT：自动增加约束，约束字段的值自动递增</li>
</ul>
<p><strong>外键约束</strong></p>
<ul>
<li>FOREIGN KEY：外键约束，约束表与表之间的关系</li>
</ul>
<h3 id="非外键约束">非外键约束</h3>
<h4 id="主键">主键</h4>
<h5 id="性质">性质</h5>
<ul>
<li>不能为空 + 唯一</li>
<li>如果主键是整数类型，需要自增</li>
</ul>
<h5 id="作用">作用</h5>
<p>通过主键能够查到<strong>唯一的一条记录</strong></p>
<p>就像输入身份证就能且只能查到一个人</p>
<h5 id="注意事项-2">注意事项</h5>
<p>在自增时sql报错，主键会被浪费导致不连号，但是没有要求主键必须连号</p>
<p>主键没有设定值，或者用null和default都可以完成主键自增的效果</p>
<h4 id="约束">约束</h4>
<ul>
<li><p>表级约束：</p>
<p>约束表中的任意一个或者多个字段，与列定义相互独立，不包含在列定义中</p>
<p>与定义用逗号隔开，必须指出要约束的列的名称</p>
<p>可以给约束起名，在出错时容易找错</p>
<p><strong>部分约束没有表级约束，只有列级约束</strong>：默认值约束，自增约束</p>
<p><strong>部分约束没有列级约束，只有表级约束</strong>：外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 表级约束</span><br><span class="line">create table t_student(</span><br><span class="line">	sno int(6) auto_increment,</span><br><span class="line">	sname varchar(5) not null,</span><br><span class="line">	sex char(1) default &#x27;男&#x27;,</span><br><span class="line">	age int(3),</span><br><span class="line">	enterdate date,</span><br><span class="line">	classname varchar(10),</span><br><span class="line">	email varchar(15),</span><br><span class="line">	constraint pk_stu primary key (sno),</span><br><span class="line">	constraint ck_stu_sex check(sex = &#x27;男&#x27; || sex = &#x27;女&#x27;),</span><br><span class="line">	constraint ck_stu_age check(age &gt;= 18 and age &lt;= 50),</span><br><span class="line">	constraint uq_stu_email unique (email)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li><p>列级约束：</p>
<p><strong>包含在列定义中</strong>，直接跟在该列的其他定义之后，用空格分隔</p>
<p>不必指定列名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 列级约束</span><br><span class="line">create table t_student(</span><br><span class="line">	sno int(6) primary key auto_increment,</span><br><span class="line">	sname varchar(5) not null,</span><br><span class="line">	sex char(1) default &#x27;男&#x27; check(sex=&#x27;男&#x27; || sex=&#x27;女&#x27;),</span><br><span class="line">	age int(3) check(age&gt;=18 and age&lt;=50),</span><br><span class="line">	enterdate date,</span><br><span class="line">	classname varchar(10),</span><br><span class="line">	email varchar(15) unique</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="在创建表以后添加约束">在创建表以后添加约束</h5>
<p>后续使用SQL语言添加约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student add constraint pk_stu primary key (sno);	-- 主键约束</span><br><span class="line">alter table t_student modify sno int(6) auto_increment; -- 自增</span><br><span class="line">alter table t_student add constraint ck_stu_sex check(sex = &#x27;男&#x27; || sex = &#x27;女&#x27;); -- 检查约束</span><br><span class="line">alter table t_student add constraint ck_stu_age check(age &gt;= 18 and age &lt;= 50);</span><br><span class="line">alter table t_student add constraint uq_stu_email unique (email); -- 唯一约束</span><br></pre></td></tr></table></figure>
<h3 id="外键约束">外键约束</h3>
<p>将多张表之间通过约束，实现关联</p>
<p>建表时添加外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table t_student(</span><br><span class="line">	sno int(6) primary key auto_increment,</span><br><span class="line">	sname varchar(5) not null,</span><br><span class="line">	classno int(4),</span><br><span class="line">	constraint fk_stu_classno foreign key (classno) references t_class (cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>建表后添加外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno);</span><br></pre></td></tr></table></figure>
<h4 id="外键策略">外键策略</h4>
<p>删除主表数据时，如果从表存在与主表被删除数据相关联的数据时，直接删除不了，为了能够删除，有三种外键策略</p>
<ul>
<li><p>no action 不允许操作</p>
<p>为了删除，只能通过SQL先将对应数据关联项修改，然后再删除</p></li>
<li><p>cascade 级联操作：操作主表的时候影响从表的外键信息</p>
<p>先删除之前的外键约束，重新添加外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student drop foreign key fk_stu_classno;</span><br><span class="line">alter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update cascade on delete cascade;</span><br></pre></td></tr></table></figure>
<p>对<strong>修改（update）</strong>和<strong>删除（delete）</strong>分别设置策略</p></li>
<li><p>set null 置空操作：将受影响部分直接置空</p>
<p>先删除之前的外键约束，重新添加外键约束</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student drop foreign key fk_stu_classno;</span><br><span class="line">alter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update set null on delete set null;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>上述策略可以<strong>混合使用</strong>，达到不同效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student add constraint fk_stu_classno foreign key (classno) references t_class (cno) on update cascade on delete set null;</span><br></pre></td></tr></table></figure>
<h5 id="应用场合">应用场合</h5>
<p>朋友圈删除：留言，点赞也删除，cascade</p>
<p>班级删除：对应学生 班级置空，稍后处理，set null</p>
<h2 id="数据库对象">数据库对象</h2>
<h3 id="事务-transaction">事务 Transaction</h3>
<p>用来维护数据库完整性，保证一系列的MySQL操作要么全部执行，要么全不执行</p>
<h4 id="概念">概念</h4>
<p><strong>事务</strong>指一个操作序列</p>
<p>这个序列中的多个操作，<strong>要么都做，要么都不做</strong>，是一个<strong>不可分割</strong>的工作单位，是数据库环境中的<strong>逻辑工作单位</strong></p>
<p>由DBMS（数据库管理系统）中的事物管理子系统负责事物的处理</p>
<p>目前常用的存储引擎有InnoDB（MySQL5.5以后默认的存储引擎）和MyISAM（MySQL5.5之前默认的存储引擎），其中InnoDB支持事务处理机制，MyISAM不支持</p>
<h4 id="特性">特性</h4>
<p>事务处理可以确保除了非事务性序列内的所有操作都能够成功完成，否则不会永久更新面向数据的资源</p>
<p>通过将一组相关操作组合为一个要么全部成功要么全部失败的序列，可以<strong>简化错误恢复</strong>，并使应用程序更加可靠</p>
<p>满足事务的<strong>四个特性（ACID特性）</strong>的操作序列，才可以称为事务</p>
<h5 id="原子性-atomicity">原子性 Atomicity</h5>
<p>原子不可再分（其实可拆乐），事务中的所有操作可以看做一个原子，事务是应用中不可再分的最小逻辑执行体，要么全执行，要么都不执行</p>
<h5 id="一致性-consistency">一致性 Consistency</h5>
<p>事务执行结果，必须使数据库从一个一致性状态，变到另一个一致性状态</p>
<p>一致性通过原子性保证</p>
<h5 id="隔离性-isolation">隔离性 Isolation</h5>
<p>各个事务的执行互不干扰</p>
<h5 id="持久性-durability">持久性 Durability</h5>
<p>事务一旦提交，对数据所做的任何改变，都要记录到永久存储器中</p>
<p><strong>一个演示</strong></p>
<p>账户转账</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table account(</span><br><span class="line">	id int primary key auto_increment,</span><br><span class="line">	uname varchar(10) not null,</span><br><span class="line">	balance double</span><br><span class="line">);</span><br><span class="line">insert into account values(null,&#x27;丽丽&#x27;,2000),(null,&#x27;小刚&#x27;,2000);</span><br><span class="line"></span><br><span class="line">select * from account;</span><br></pre></td></tr></table></figure>
<p>丽丽给小刚转账200元</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update account set balance = balance - 200 where id = 1;</span><br><span class="line">update account set balance = balance + 200 where id = 2;</span><br></pre></td></tr></table></figure>
<p>但是这样是两个事务（默认一个DML语句是一个事务），所以上面的操作执行了两个事务</p>
<p>所以一旦出现意外，会导致错误</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update account set balance = balance - 200 where id = 1;</span><br><span class="line">update account set balance = balance2 + 200 where id = 2;</span><br></pre></td></tr></table></figure>
<p>第一条语句成功执行，丽丽账户减少200，而第二条语句报错，小刚账户不变，这样200就凭空消失了</p>
<p>为了解决这样的问题，我们需要控制这两个操作为一个事务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">update account set balance = balance - 200 where id = 1;</span><br><span class="line">update account set balance = balance + 200 where id = 2;</span><br><span class="line"></span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line">commit;</span><br></pre></td></tr></table></figure>
<p>start transaction 手动开启事物</p>
<p>然后执行各条语句</p>
<p>如果不想要当前的修改可以进行回滚</p>
<p>rollback； 回滚操作</p>
<p>如果确认修改，则进行提交</p>
<p>commit； 提交操作</p>
<p><strong>在回滚和提交之前，数据库中的数据都是操作的缓存中的数据，而不是数据库的真实数据</strong></p>
<p>相当于拿着样板修改，确定后再真正修改</p>
<h4 id="并发问题">并发问题</h4>
<h5 id="脏读-dirty-read">脏读 Dirty read</h5>
<p>读取到了未提交的数据</p>
<h5 id="不可重复读-unrepeatableread">不可重复读 Unrepeatableread</h5>
<p>多次读取同一个数据，但是在事务中，另一个事务更改了这个数据，并且提交，导致读取的数据没有更新</p>
<p>解决：通过锁定读取的数据，防止其他事务更改</p>
<h5 id="幻读-phantom-read">幻读 Phantom read</h5>
<p>事务A读取了几行数据后，另一个事务B插入了一些数据，在随后查询中，事务A发现多了一些数据</p>
<p>解决：锁定全表，防止其他事务修改</p>
<h4 id="事务隔离级别">事务隔离级别</h4>
<p>事务的隔离级别用于决定如何控制并发用户读写数据的操作。</p>
<p>数据库允许多用户并发访问，多个用户同时对数据库操作会产生并发问题，MySQL提供四种隔离级别来解决上述问题。</p>
<p>事务的隔离级别从低到高：</p>
<p>READ UNCOMMITTED</p>
<p>READ COMMITTED</p>
<p>REPEATABLE READ</p>
<p>SERIALIZABLE</p>
<p>下面是他们解决并发问题的能力</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">隔离级别</th>
<th style="text-align: left;">脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Read Uncommitted</td>
<td style="text-align: left;">不解决</td>
<td>不解决</td>
<td>不解决</td>
</tr>
<tr class="even">
<td style="text-align: left;">Read Committed</td>
<td style="text-align: left;">解决</td>
<td>不解决</td>
<td>不解决</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Repeatable read</td>
<td style="text-align: left;">解决</td>
<td>解决</td>
<td>不解决</td>
</tr>
<tr class="even">
<td style="text-align: left;">Serializable</td>
<td style="text-align: left;">解决</td>
<td>解决</td>
<td>解决</td>
</tr>
</tbody>
</table>
<p>并不是隔离级别越高越好</p>
<p>隔离级别越低，越能支持高并发的数据库操作</p>
<p>但同时，级别越低，会出现的并发问题也会更多</p>
<p>所以需要根据实际情况取舍</p>
<p>查看默认的事务隔离级别 MySQL默认repeatable read</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@transaction_isolation;</span><br></pre></td></tr></table></figure>
<h5 id="设置事务的隔离级别设置当前会话的隔离级别">设置事务的隔离级别（设置当前会话的隔离级别）</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set session transaction isolation level read uncommitted;</span><br><span class="line">set session transaction isolation level read committed;</span><br><span class="line">set session transaction isolation level repeatable read;</span><br><span class="line">set session transaction isolation level serializable;</span><br></pre></td></tr></table></figure>
<p>可以利用cmd和Navicat模拟并发过程</p>
<h3 id="视图-view">视图 view</h3>
<h4 id="概念-1">概念</h4>
<p>是一个从单张或多张基础数据表或其他视图中构建出来的<strong>虚拟表</strong></p>
<p>过滤原表，查出需要的数据，重新整合成一张虚拟表</p>
<p>数据库中只存放视图的定义（动态检索数据的查询语句），并不存放视图中的数据</p>
<p>创建一个视图，相当于提供一个特定的画面，连接不同的数据库表，用户通过这个特定的画面能够看到自己需要的信息，不需要在接触数据库表</p>
<h4 id="好处">好处</h4>
<p>简化用户操作：只注意所关心的数据，不需要关心数据表的结构，关联条件，查询条件等等</p>
<p>对机密数据提供安全保护：对不同的用户定义不同的视图，避免机密数据出现在不应该看到这些数据的用户视图上。这样视图就自动提供了对机密数据的安全保护功能。</p>
<h4 id="创建视图">创建视图</h4>
<h5 id="创建单表视图">创建单表视图</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create view myview01</span><br><span class="line">as</span><br><span class="line">select empno,ename,job,deptno </span><br><span class="line">from emp</span><br><span class="line">where deptno = 20;</span><br><span class="line"></span><br><span class="line">select * from myview01;</span><br></pre></td></tr></table></figure>
<p>单独的创建视图，依靠表单的指定信息</p>
<p>重复执行创建视图语句会报错，添加 replace 关键字</p>
<p>实现创建/替换视图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create or replace view myview01</span><br><span class="line">as</span><br><span class="line">select empno,ename,job,deptno </span><br><span class="line">from emp</span><br><span class="line">where deptno = 20;</span><br></pre></td></tr></table></figure>
<h5 id="创建替换多表视图">创建/替换多表视图</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create or replace view myview02</span><br><span class="line">as</span><br><span class="line">select e.empno,e.ename,e.sal,d.deptno,d.dname</span><br><span class="line">from emp e</span><br><span class="line">join dept d</span><br><span class="line">on e.deptno = d.deptno</span><br><span class="line">where sal &gt; 2000;</span><br></pre></td></tr></table></figure>
<p>相当于连接多表，然后对这个多表创建视图</p>
<h5 id="创建统计视图">创建统计视图</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create or replace view myview03</span><br><span class="line">as </span><br><span class="line">select e.deptno,d.dname,avg(sal),min(sal),count(1)</span><br><span class="line">from emp e</span><br><span class="line">join dept d</span><br><span class="line">using(deptno)</span><br><span class="line">group by e.deptno;</span><br></pre></td></tr></table></figure>
<h5 id="创建基于视图的视图">创建基于视图的视图</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create or replace view myview04</span><br><span class="line">as </span><br><span class="line">select * from myview03 where deptno = 20;</span><br></pre></td></tr></table></figure>
<p>同样的，对视图也可以创建视图</p>
<h4 id="插入数据">插入数据</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into myview01 (empno,ename,job,deptno) values (9999,&#x27;lili&#x27;,&#x27;clerk&#x27;,20);</span><br><span class="line">insert into myview01 (empno,ename,job,deptno) values (8888,&#x27;nana&#x27;,&#x27;clerk&#x27;,30);</span><br></pre></td></tr></table></figure>
<p>插入到视图中，也会插入到原数据库表</p>
<p>但是如果视图展示20部门的员工信息，但是插入30部门的员工，上述语言创建的视图，也会显示（正常是不应该显示的）</p>
<p>通过添加 with check option，进行检查</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create or replace view myview01</span><br><span class="line">as</span><br><span class="line">select empno,ename,job,deptno </span><br><span class="line">from emp</span><br><span class="line">where deptno = 20</span><br><span class="line">with check option;</span><br></pre></td></tr></table></figure>
<h3 id="存储过程-stored-procedure">存储过程 Stored Procedure</h3>
<p>SQL语言非常便利，简洁，一个命令实现一个处理（非程序语言）</p>
<p>如果不编写流程，所有的处理只能通过一个个命令来实现。</p>
<p>但是局限性是显而易见的</p>
<p>所以出现存储过程这个概念</p>
<p><strong>存储过程</strong>：数据库中保存（Stored）的一系列SQL命令（Procedure）的集合。也可以将其看作相互之间有关系的SQL命令组织在一起形成的一个小程序</p>
<h4 id="优点">优点</h4>
<h5 id="提高执行性能">提高执行性能</h5>
<p>存储过程执行效率之所以高，在于普通的SQL语句，每次都需要语法分析，编译，执行，但是存储过程只是在第一次执行语法分析，编译，执行，以后都是对结果进行调用</p>
<h5 id="可减轻网络负担">可减轻网络负担</h5>
<p>使用存储过程，复杂的数据库操作也可以在数据库服务器中完成。只需要从客户端（或应用程序）传递给数据库必要的参数就行，比起需要多次传递SQL命令本身，这大大减轻了网络负担</p>
<h5 id="将数据库的处理黑盒化">将数据库的处理黑盒化</h5>
<p>应用程序中完全不用考虑存储过程的内部详细处理，只需要知道调用那个存储过程就可以了</p>
<h4 id="展示存储过程">展示存储过程</h4>
<h5 id="定义一个没有返回值的存储过程">定义一个没有返回值的存储过程</h5>
<p>实现模糊查询操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create procedure mypro01(name varchar(10))</span><br><span class="line">begin</span><br><span class="line">	if name is null or name = &quot;&quot; then</span><br><span class="line">		select * from emp;</span><br><span class="line">	else </span><br><span class="line">		select * from emp where ename like concat(&#x27;%&#x27;,name,&#x27;%&#x27;);</span><br><span class="line">	end if;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>
<p>相当于编程语言中编写函数的过程，这个语法很类似于VHDL</p>
<h5 id="定义一个有返回值的存储过程">定义一个有返回值的存储过程</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create procedure mypro02(in name varchar(10),out num int(3))</span><br><span class="line">begin</span><br><span class="line">	if name is null or name = &quot;&quot; then</span><br><span class="line">		select * from emp;</span><br><span class="line">	else </span><br><span class="line">		select * from emp where ename like concat(&#x27;%&#x27;,name,&#x27;%&#x27;);</span><br><span class="line">	end if;</span><br><span class="line">	select found_rows() into num;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>
<p>不同于编程语言的函数，存储过程的返回值同样写在括号中，用
<strong>in</strong> 来表示输入参数（in可以省略不写），用
<strong>out</strong> 表示返回值</p>
<p>存储过程中查看记录条数，使用<strong>found_rows()</strong></p>
<h5 id="调用存储过程">调用存储过程</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">call mypro01(null);</span><br><span class="line">call mypro01(&#x27;R&#x27;);</span><br></pre></td></tr></table></figure>
<p>相当于编程语言中实现函数调用的过程，输入参数，获得对应的结果</p>
<p>对于有返回值的存储过程的调用，可以添加@来表示返回值，并且可以使用select查询该返回值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">call mypro02(null,@num);</span><br><span class="line">select @num;</span><br><span class="line"></span><br><span class="line">call mypro02(&#x27;R&#x27;,@aaa);</span><br><span class="line">select @aaa; </span><br></pre></td></tr></table></figure>
<h5 id="删除存储过程">删除存储过程</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop procedure mypro01;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/MySQL/" rel="tag"><i class="fa fa-tag"></i> MySQL</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/47445/" rel="prev" title="安装MySQL">
      <i class="fa fa-chevron-left"></i> 安装MySQL
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/855/" rel="next" title="LaTex数学符号表">
      LaTex数学符号表 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8cmd%E6%93%8D%E4%BD%9C"><span class="nav-number">1.</span> <span class="nav-text">使用cmd操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BB%E5%BD%95"><span class="nav-number">1.0.1.</span> <span class="nav-text">登录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%AE%E5%BD%95"><span class="nav-number">1.0.2.</span> <span class="nav-text">展示数据库目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.0.3.</span> <span class="nav-text">使用某个数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8"><span class="nav-number">1.0.4.</span> <span class="nav-text">展示数据库中的所有表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-number">1.0.5.</span> <span class="nav-text">退出的三种方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E6%A8%A1%E6%8B%9F"><span class="nav-number">1.0.6.</span> <span class="nav-text">并发模拟</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">2.</span> <span class="nav-text">数据库表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A4%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">2.1.</span> <span class="nav-text">认识数据库表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">2.2.</span> <span class="nav-text">创建数据库表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-number">2.2.1.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.2.2.</span> <span class="nav-text">建表语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">2.2.3.</span> <span class="nav-text">查看表的结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.2.4.</span> <span class="nav-text">查看建表语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">2.2.5.</span> <span class="nav-text">查看表中的数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.</span> <span class="nav-text">数据库表列类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.1.</span> <span class="nav-text">整数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.2.</span> <span class="nav-text">浮点数类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.3.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.4.</span> <span class="nav-text">日期和时间类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sql%E7%9A%84%E4%BA%94%E5%A4%A7%E9%83%A8%E5%88%86"><span class="nav-number">4.</span> <span class="nav-text">SQL的五大部分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dql-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="nav-number">4.1.</span> <span class="nav-text">DQL 数据查询语言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.1.</span> <span class="nav-text">单表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">基础查询</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE"><span class="nav-number">4.1.1.1.1.</span> <span class="nav-text">显示所有数据</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E9%83%A8%E5%88%86%E5%88%97"><span class="nav-number">4.1.1.1.2.</span> <span class="nav-text">显示部分列</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E9%83%A8%E5%88%86%E8%A1%8Cwhere%E5%AD%90%E5%8F%A5"><span class="nav-number">4.1.1.1.3.</span> <span class="nav-text">显示部分行：where子句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E9%83%A8%E5%88%86%E5%88%97%E9%83%A8%E5%88%86%E8%A1%8C"><span class="nav-number">4.1.1.1.4.</span> <span class="nav-text">显示部分列，部分行</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">一些操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="nav-number">4.1.1.2.1.</span> <span class="nav-text">起别名</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.1.1.2.2.</span> <span class="nav-text">算数运算符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8E%BB%E9%87%8D%E6%93%8D%E4%BD%9C"><span class="nav-number">4.1.1.2.3.</span> <span class="nav-text">去重操作</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-number">4.1.1.2.4.</span> <span class="nav-text">排序</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#where%E5%AD%90%E5%8F%A5"><span class="nav-number">4.1.1.3.</span> <span class="nav-text">where子句</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#where-%E5%AD%90%E5%8F%A5-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">4.1.1.3.1.</span> <span class="nav-text">where 子句 + 关系运算符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#and-%E5%92%8C-%E4%B8%A4%E7%A7%8D%E8%A1%A8%E7%A4%BA"><span class="nav-number">4.1.1.3.2.</span> <span class="nav-text">and 和 &amp;&amp; 两种表示</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%AD%9B%E9%80%89%E5%AE%8C%E5%90%8E%E6%8E%92%E5%BA%8F%E8%AF%AD%E5%8F%A5%E5%8A%A0%E5%9C%A8%E5%90%8E%E9%9D%A2%E5%8D%B3%E5%8F%AF"><span class="nav-number">4.1.1.3.3.</span> <span class="nav-text">筛选完后，排序，语句加在后面即可</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#between-%E8%8C%83%E5%9B%B4%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">4.1.1.3.4.</span> <span class="nav-text">between 范围关键字</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#or-%E5%92%8C-%E4%B8%A4%E7%A7%8D%E8%A1%A8%E7%A4%BA"><span class="nav-number">4.1.1.3.5.</span> <span class="nav-text">or 和 || 两种表示</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8F%A6%E4%B8%80%E7%A7%8D%E9%9B%86%E5%90%88%E8%A1%A8%E7%A4%BA"><span class="nav-number">4.1.1.3.6.</span> <span class="nav-text">另一种集合表示</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.1.4.</span> <span class="nav-text">模糊查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E-null-%E7%9A%84%E5%88%A4%E6%96%AD"><span class="nav-number">4.1.1.5.</span> <span class="nav-text">关于 null 的判断</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%8F%E6%8B%AC%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">4.1.1.6.</span> <span class="nav-text">小括号的使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">4.1.1.7.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-number">4.1.1.7.1.</span> <span class="nav-text">单行函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="nav-number">4.1.1.7.2.</span> <span class="nav-text">多行函数（分组函数）</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%86%E7%BB%84"><span class="nav-number">4.1.1.8.</span> <span class="nav-text">分组</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#group-by"><span class="nav-number">4.1.1.8.1.</span> <span class="nav-text">group by</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89-having"><span class="nav-number">4.1.1.8.2.</span> <span class="nav-text">分组后筛选 having</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.2.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.1.2.1.1.</span> <span class="nav-text">交叉连接</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%87%AA%E7%84%B6%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.1.2.1.2.</span> <span class="nav-text">自然连接</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#using-%E5%AD%90%E5%8F%A5"><span class="nav-number">4.1.2.1.3.</span> <span class="nav-text">using 子句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%89%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.2.1.4.</span> <span class="nav-text">三表连接查询</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.2.1.5.</span> <span class="nav-text">自连接查询</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E7%9A%84%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.2.1.6.</span> <span class="nav-text">92语法的多表查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.3.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8D%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.3.1.</span> <span class="nav-text">不相关子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.3.1.1.</span> <span class="nav-text">单行子查询</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.3.1.2.</span> <span class="nav-text">多行子查询</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.1.3.2.</span> <span class="nav-text">相关子查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dml-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80"><span class="nav-number">4.2.</span> <span class="nav-text">DML 数据操作语言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.1.</span> <span class="nav-text">添加数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">注意事项：</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%97%B6%E9%97%B4"><span class="nav-number">4.2.1.1.1.</span> <span class="nav-text">时间</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#char-varchar"><span class="nav-number">4.2.1.1.2.</span> <span class="nav-text">char varchar</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.2.</span> <span class="nav-text">修改、删除数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">注意事项：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%85%E7%A9%BA%E8%A1%A8%E5%86%85%E6%95%B0%E6%8D%AE"><span class="nav-number">4.2.3.</span> <span class="nav-text">清空表内数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#delete%E5%92%8Ctruncate%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">delete和truncate的区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ddl-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80"><span class="nav-number">4.3.</span> <span class="nav-text">DDL 数据定义语言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8-1"><span class="nav-number">4.3.1.</span> <span class="nav-text">创建数据库表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">4.3.2.</span> <span class="nav-text">修改删除数据库表</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">4.3.2.1.</span> <span class="nav-text">修改表的结构</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">4.3.3.</span> <span class="nav-text">快速添加数据库表</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AE%E8%B7%9F%E5%8E%9F%E8%A1%A8%E4%B8%80%E8%87%B4"><span class="nav-number">4.3.3.1.</span> <span class="nav-text">结构和数据跟原表一致</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AA%E4%BF%9D%E7%95%99%E5%8E%9F%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8D%E5%8C%85%E6%8B%AC%E6%95%B0%E6%8D%AE"><span class="nav-number">4.3.3.2.</span> <span class="nav-text">只保留原表结构，不包括数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AA%E5%A4%8D%E5%88%B6%E9%83%A8%E5%88%86%E5%88%97%E9%83%A8%E5%88%86%E6%95%B0%E6%8D%AE"><span class="nav-number">4.3.3.3.</span> <span class="nav-text">只复制部分列，部分数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dcl-%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80"><span class="nav-number">4.4.</span> <span class="nav-text">DCL 数据控制语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tcl-%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80"><span class="nav-number">4.5.</span> <span class="nav-text">TCL 事务控制语言</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.</span> <span class="nav-text">表的完整性约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.1.</span> <span class="nav-text">非外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BB%E9%94%AE"><span class="nav-number">5.1.1.</span> <span class="nav-text">主键</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%A7%E8%B4%A8"><span class="nav-number">5.1.1.1.</span> <span class="nav-text">性质</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">5.1.1.2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="nav-number">5.1.1.3.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.1.2.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E4%BB%A5%E5%90%8E%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">在创建表以后添加约束</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="nav-number">5.2.</span> <span class="nav-text">外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%AD%96%E7%95%A5"><span class="nav-number">5.2.1.</span> <span class="nav-text">外键策略</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E5%90%88"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">应用场合</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1"><span class="nav-number">6.</span> <span class="nav-text">数据库对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1-transaction"><span class="nav-number">6.1.</span> <span class="nav-text">事务 Transaction</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">6.1.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">6.1.2.</span> <span class="nav-text">特性</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7-atomicity"><span class="nav-number">6.1.2.1.</span> <span class="nav-text">原子性 Atomicity</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7-consistency"><span class="nav-number">6.1.2.2.</span> <span class="nav-text">一致性 Consistency</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9A%94%E7%A6%BB%E6%80%A7-isolation"><span class="nav-number">6.1.2.3.</span> <span class="nav-text">隔离性 Isolation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E6%80%A7-durability"><span class="nav-number">6.1.2.4.</span> <span class="nav-text">持久性 Durability</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="nav-number">6.1.3.</span> <span class="nav-text">并发问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%84%8F%E8%AF%BB-dirty-read"><span class="nav-number">6.1.3.1.</span> <span class="nav-text">脏读 Dirty read</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB-unrepeatableread"><span class="nav-number">6.1.3.2.</span> <span class="nav-text">不可重复读 Unrepeatableread</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B9%BB%E8%AF%BB-phantom-read"><span class="nav-number">6.1.3.3.</span> <span class="nav-text">幻读 Phantom read</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">6.1.4.</span> <span class="nav-text">事务隔离级别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E8%AE%BE%E7%BD%AE%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">6.1.4.1.</span> <span class="nav-text">设置事务的隔离级别（设置当前会话的隔离级别）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE-view"><span class="nav-number">6.2.</span> <span class="nav-text">视图 view</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5-1"><span class="nav-number">6.2.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A5%BD%E5%A4%84"><span class="nav-number">6.2.2.</span> <span class="nav-text">好处</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.3.</span> <span class="nav-text">创建视图</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%95%E8%A1%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.3.1.</span> <span class="nav-text">创建单表视图</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%9B%BF%E6%8D%A2%E5%A4%9A%E8%A1%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.3.2.</span> <span class="nav-text">创建&#x2F;替换多表视图</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%9F%E8%AE%A1%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.3.3.</span> <span class="nav-text">创建统计视图</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%9F%BA%E4%BA%8E%E8%A7%86%E5%9B%BE%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="nav-number">6.2.3.4.</span> <span class="nav-text">创建基于视图的视图</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">6.2.4.</span> <span class="nav-text">插入数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B-stored-procedure"><span class="nav-number">6.3.</span> <span class="nav-text">存储过程 Stored Procedure</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%98%E7%82%B9"><span class="nav-number">6.3.1.</span> <span class="nav-text">优点</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8F%90%E9%AB%98%E6%89%A7%E8%A1%8C%E6%80%A7%E8%83%BD"><span class="nav-number">6.3.1.1.</span> <span class="nav-text">提高执行性能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%AF%E5%87%8F%E8%BD%BB%E7%BD%91%E7%BB%9C%E8%B4%9F%E6%8B%85"><span class="nav-number">6.3.1.2.</span> <span class="nav-text">可减轻网络负担</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%86%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%84%E7%90%86%E9%BB%91%E7%9B%92%E5%8C%96"><span class="nav-number">6.3.1.3.</span> <span class="nav-text">将数据库的处理黑盒化</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">6.3.2.</span> <span class="nav-text">展示存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%B2%A1%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">定义一个没有返回值的存储过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%9C%89%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">6.3.2.2.</span> <span class="nav-text">定义一个有返回值的存储过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">6.3.2.3.</span> <span class="nav-text">调用存储过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">6.3.2.4.</span> <span class="nav-text">删除存储过程</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ekko"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Ekko</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      我来人间凑个数(这是个集合)
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://monster-siren.hypergryph.com/" title="https:&#x2F;&#x2F;monster-siren.hypergryph.com&#x2F;" rel="noopener" target="_blank">塞壬唱片</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://imgod.me/" title="https:&#x2F;&#x2F;imgod.me&#x2F;" rel="noopener" target="_blank">imgod</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ekko</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">30k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:48</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div><script color="119,119,119" opacity="0.5" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  















  

  

  

</body>
</html>
